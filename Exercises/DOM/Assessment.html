<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>

    </div>
    <h2 id="marksYouHave"></h2>
    <script>
        let container = document.getElementsByTagName("div")[0]
        let currentQuestion = 0
        let marks = []
        let questions = [
            {
                "question": 'what is my name',
                'choices': ['iradukunda','gambira','mufasa','docile'],
                'correct': "iradukunda"
            },
            {
                "question": 'what is my age',
                'choices': [10,20,15,30],
                'correct': 15
            },
            {
                "question": 'where do i live',
                'choices': ['gisagara','musanze','rurindo','rubavu'],
                'correct': "rubavu"
            }
        ]
        let displayingQuestion = () => {
            displayingMarks()
            let currentQ = questions[currentQuestion]
            let question = document.createElement("h2")
            let choices = document.createElement("p")
            let choicesContainer = document.createElement("div")
            let button = document.createElement("button")
            button.textContent = "next"
            question.textContent = currentQ["question"]
            
            currentQ['choices'].forEach(singleQuestion=>{
                let choice = choices.cloneNode(true)
                choice.textContent = singleQuestion
                let i = 0
                choice.addEventListener("click",()=>{
                    if(singleQuestion == currentQ['correct']){
                        choice.style.backgroundColor = "green"
                        !marks.includes(singleQuestion)?marks.push(singleQuestion): null
                        displayingMarks()
                    }else{

                        choice.style.backgroundColor = "red"
                        
                    }
                    

                })
                choicesContainer.appendChild(choice)
            })
            choicesContainer.addEventListener("click",()=>{
                
                addingStyleToCorrect(choicesContainer,currentQ)

            })
            
            button.addEventListener('click',()=>{
                if(currentQuestion < questions.length-1){
                    emptyingContainer()
                    currentQuestion++
                    displayingQuestion()
                }
                
            })
            container.append(question,choicesContainer,button)


        }

        const addingStyleToCorrect = (choicesContainer,currentQ) =>{
            let children = Array.from(choicesContainer.children)
                for(let i = 0;i< children.length;i++){
                    if(children[i].textContent == currentQ['correct']){
                        children[i].style.backgroundColor =  "green"
                    }
                }
        }

        const emptyingContainer = () => {
            while(container.childElementCount >0){
                container.removeChild(container.firstElementChild)
            }
        }

        const displayingMarks = () => {
            marksYouHave.textContent = "Your marks: " + marks.length
        }
        displayingQuestion()
    </script>
</body>
</html>